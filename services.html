<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>All Services - ExTremeData</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://unpkg.com/lucide@latest/dist/umd/lucide.js"></script>
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <style>
  /* --- PROFESSIONAL DESIGN SYSTEM (UNCHANGED) --- */
  :root {
    --color-primary: #2563EB; --color-primary-hover: #1D4ED8; --color-primary-light: #EFF6FF;
    --color-text-primary: #1E293B; --color-text-secondary: #64748B; --color-border: #E2E8F0;
    --color-background: #F8FAFC; --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.1), 0 2px 4px -2px rgb(0 0 0 / 0.1);
  }
  .dark {
    --color-primary: #3B82F6; --color-primary-hover: #60A5FA; --color-primary-light: #1F2937;
    --color-text-primary: #F8FAFC; --color-text-secondary: #94A3B8; --color-border: #334155;
    --color-background: #0F172A;
  }
  body { background-color: var(--color-background); color: var(--color-text-primary); font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif; }
  .header-nav { background-color: white; border-bottom: 1px solid var(--color-border); box-shadow: var(--shadow-md); }
  .dark .header-nav { background-color: #111827; }
  .section-card { background-color: white; border: 1px solid var(--color-border); border-radius: 1.5rem; padding: 1.5rem; box-shadow: var(--shadow-md); }
  .dark .section-card { background-color: var(--color-primary-light); }

  /* --- STYLES FOR THE SERVICE GRID --- */
  .service-category-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--color-text-secondary);
    padding-bottom: 0.5rem;
    border-bottom: 1px solid var(--color-border);
    margin-bottom: 1rem;
    margin-top: 1.5rem;
  }
  .service-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
    gap: 1rem;
  }
  .service-card {
    background-color: var(--color-background);
    border: 1px solid var(--color-border);
    border-radius: 1rem;
    padding: 1.25rem 1rem;
    text-align: center;
    transition: all 0.2s ease-in-out;
    text-decoration: none;
    color: var(--color-text-primary);
  }
  .dark .service-card {
      background-color: #111827;
  }
  .service-card:hover {
    transform: translateY(-4px);
    box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
    border-color: var(--color-primary);
  }
  .service-icon-wrapper {
    margin: 0 auto 0.75rem auto;
    width: 48px;
    height: 48px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
  }
  .service-name {
    font-weight: 600;
    font-size: 0.875rem;
  }
  .coming-soon-badge {
      font-size: 0.65rem;
      font-weight: 700;
      color: #ca8a04; /* amber-500 */
      background-color: #fefce8; /* amber-50 */
      padding: 0.125rem 0.5rem;
      border-radius: 99px;
      margin-top: 0.5rem;
      display: inline-block;
  }
  .dark .coming-soon-badge {
      color: #f59e0b; /* amber-400 */
      background-color: #422006; /* amber-950 */
  }
  </style>
</head>

<body class="min-h-screen">
  <!-- Navigation -->
  <nav class="header-nav sticky top-0 z-40">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between items-center h-16">
        <div class="flex items-center space-x-3">
          <a href="data.html" class="p-2 rounded-full hover:bg-gray-100 dark:hover:bg-gray-800 transition-colors"><i data-lucide="arrow-left" class="w-5 h-5"></i></a>
          <h1 class="text-lg font-bold">All Services</h1>
        </div>
        <div class="flex items-center space-x-4">
          <div class="text-right">
            <div class="text-xs text-slate-500 dark:text-slate-400">Balance</div>
            <div id="walletBalance" class="font-bold text-lg">Loading...</div>
          </div>
          <div id="userAvatar" class="w-10 h-10 bg-blue-100 dark:bg-blue-900 text-blue-600 dark:text-blue-300 rounded-full flex items-center justify-center font-bold text-sm">?</div>
        </div>
      </div>
    </div>
  </nav>

  <main class="max-w-4xl mx-auto p-4 sm:p-6 lg:p-8">
    <section class="section-card">
      
      <!-- Everyday Bills Category -->
      <h3 class="service-category-title">Everyday Bills</h3>
      <div class="service-grid">
        <!-- Data Top-up -->
        <a href="data-topup.html" class="service-card">
          <div class="service-icon-wrapper bg-blue-100 dark:bg-blue-900"><i data-lucide="wifi" class="w-6 h-6 text-blue-600 dark:text-blue-300"></i></div>
          <span class="service-name">Data Top-up</span>
        </a>
        <!-- Airtime Top-up -->
        <a href="buy-airtime.html" class="service-card">
          <div class="service-icon-wrapper bg-green-100 dark:bg-green-900"><i data-lucide="smartphone" class="w-6 h-6 text-green-600 dark:text-green-300"></i></div>
          <span class="service-name">Airtime Top-up</span>
        </a>
        <!-- Cable TV -->
        <a href="cable.html" class="service-card">
          <div class="service-icon-wrapper bg-yellow-100 dark:bg-yellow-900"><i data-lucide="tv" class="w-6 h-6 text-yellow-600 dark:text-yellow-300"></i></div>
          <span class="service-name">Cable TV</span>
        </a>
        <!-- Electricity -->
        <a href="electricity.html" class="service-card">
          <div class="service-icon-wrapper bg-orange-100 dark:bg-orange-900"><i data-lucide="zap" class="w-6 h-6 text-orange-600 dark:text-orange-300"></i></div>
          <span class="service-name">Electricity</span>
        </a>
      </div>

      <!-- Entertainment & Gaming Category -->
      <h3 class="service-category-title">Entertainment & Gaming</h3>
      <div class="service-grid">
        <!-- Betting -->
        <a href="betting.html" class="service-card">
          <div class="service-icon-wrapper bg-purple-100 dark:bg-purple-900"><i data-lucide="trophy" class="w-6 h-6 text-purple-600 dark:text-purple-300"></i></div>
          <span class="service-name">Betting</span>
        </a>
        <!-- Spin & Win -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-pink-100 dark:bg-pink-900"><i data-lucide="dices" class="w-6 h-6 text-pink-600 dark:text-pink-300"></i></div>
          <span class="service-name">Spin & Win</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
      </div>

      <!-- Education Category -->
      <h3 class="service-category-title">Education</h3>
      <div class="service-grid">
        <!-- WAEC PINs -->
        <a href="education.html" class="service-card">
          <div class="service-icon-wrapper bg-indigo-100 dark:bg-indigo-900"><i data-lucide="graduation-cap" class="w-6 h-6 text-indigo-600 dark:text-indigo-300"></i></div>
          <span class="service-name">WAEC PINs</span>
        </a>
      </div>
      
      <!-- Travel & Lifestyle Category -->
      <h3 class="service-category-title">Travel & Lifestyle</h3>
      <div class="service-grid">
        <!-- Transport & Toll -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-cyan-100 dark:bg-cyan-900"><i data-lucide="car" class="w-6 h-6 text-cyan-600 dark:text-cyan-300"></i></div>
          <span class="service-name">Transport & Toll</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
        <!-- Travel & Hotel -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-teal-100 dark:bg-teal-900"><i data-lucide="plane" class="w-6 h-6 text-teal-600 dark:text-teal-300"></i></div>
          <span class="service-name">Travel & Hotel</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
      </div>

      <!-- Financial Services Category -->
      <h3 class="service-category-title">Financial Services</h3>
      <div class="service-grid">
        <!-- Loans -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-red-100 dark:bg-red-900"><i data-lucide="landmark" class="w-6 h-6 text-red-600 dark:text-red-300"></i></div>
          <span class="service-name">Loans</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
        <!-- Safebox (Savings) -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-lime-100 dark:bg-lime-900"><i data-lucide="piggy-bank" class="w-6 h-6 text-lime-600 dark:text-lime-300"></i></div>
          <span class="service-name">Safebox</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
        <!-- Refer & Earn -->
        <a href="#" class="service-card">
          <div class="service-icon-wrapper bg-sky-100 dark:bg-sky-900"><i data-lucide="gift" class="w-6 h-6 text-sky-600 dark:text-sky-300"></i></div>
          <span class="service-name">Refer & Earn</span>
          <div class="coming-soon-badge">SOON</div>
        </a>
      </div>
      
    </section>
  </main>

<script>
// --- GLOBAL SETUP ---
const SUPABASE_URL = 'https://nzwrrahwgtisyxouplnu.supabase.co';
const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im56d3JyYWh3Z3Rpc3l4b3VwbG51Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTU5MDk1NzAsImV4cCI6MjA3MTQ4NTU3MH0.kvc0VtfT_isXxP4i9XCzUiwOVLVl7Hni6rSXmIAaLHw';
const supabase = window.supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

class ServicesPageManager {
  constructor() {
    this.localUserData = null;
    this.supabaseUser = null;
    this.userBalance = 0;
  }

  async initialize() {
    this.applyDarkMode();
    const { data: { user } } = await supabase.auth.getUser();
    if (!user) {
      // For a public-facing page, you might just hide user-specific info
      // instead of redirecting. But for an internal hub, redirecting is fine.
      window.location.href = "signin.html";
      return;
    }
    this.supabaseUser = user;
    this.loadLocalUserData();
    this.initializeUI();
    this.setupEventListeners();
  }

  initializeUI() {
    const initials = (this.localUserData.firstName?.charAt(0) || '') + (this.localUserData.lastName?.charAt(0) || '');
    document.getElementById('userAvatar').textContent = initials.toUpperCase() || '?';
    this.loadWalletBalance();
    lucide.createIcons();
  }

  setupEventListeners() {
    window.addEventListener('storage', (e) => { 
      if (e.key === 'xt_theme') this.applyDarkMode(); 
    });
  }

  applyDarkMode() {
    const isDarkMode = localStorage.getItem('xt_theme') === 'dark';
    document.documentElement.classList.toggle('dark', isDarkMode);
  }

  loadLocalUserData() {
    try {
      const storedData = localStorage.getItem("userData");
      if (storedData) this.localUserData = JSON.parse(storedData);
      else throw new Error("No user data found.");
    } catch(e) {
      // Using SweetAlert2 for consistency, but a simple alert is also fine here.
      alert("Session corrupted. Please sign in again.");
      window.location.href = "signin.html";
    }
  }

  async loadWalletBalance() {
    try {
      const { data, error } = await supabase.from('user_profiles')
        .select('balance')
        .eq('id', this.supabaseUser.id)
        .single();
      if (error) throw error;
      this.userBalance = data ? parseFloat(data.balance) : 0;
      document.getElementById('walletBalance').textContent = `â‚¦${this.userBalance.toLocaleString('en-US', { minimumFractionDigits: 2 })}`;
    } catch (error) {
      document.getElementById('walletBalance').textContent = 'Error';
    }
  }
}

document.addEventListener('DOMContentLoaded', () => {
  const page = new ServicesPageManager();
  page.initialize();
});
</script>
</body>
</html>